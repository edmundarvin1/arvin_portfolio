{% extends "public/base.html" %}

{% block title %}Jupyter Notebooks - Edmund Arvin De Leon{% endblock %}

{% block main_class %}content-page{% endblock %}

{% block content %}
<div class="container">
    <h1>Jupyter Notebooks</h1>
    
    <div class="filter-tabs">
        <button class="filter-btn active" data-filter="all">All</button>
        {% set all_tags = [] %}
        {% for notebook in notebooks %}
            {% for tag in notebook.tags %}
                {% if tag not in all_tags %}
                    {% set _ = all_tags.append(tag) %}
                {% endif %}
            {% endfor %}
        {% endfor %}
        
        {% for tag in all_tags %}
        <button class="filter-btn" data-filter="{{ tag }}">{{ tag }}</button>
        {% endfor %}
    </div>
    
    <div class="content-grid">
        {% for notebook in notebooks %}
        <div class="content-card" data-tags="{{ notebook.tags|join(' ') }}">
            <div class="content-image">
                <div class="placeholder-image">
                    <i class="fas fa-book-open"></i>
                </div>
            </div>
            <div class="content-info">
                <h3>{{ notebook.title }}</h3>
                <p class="content-date">{{ notebook.date }}</p>
                <p>{{ notebook.description }}</p>
                <div class="content-tags">
                    {% for tag in notebook.tags %}
                    <span>{{ tag }}</span>
                    {% endfor %}
                </div>
                <a href="{{ url_for('notebook', slug=notebook.slug) }}" class="btn primary">View Notebook</a>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const filterButtons = document.querySelectorAll('.filter-btn');
        const contentCards = document.querySelectorAll('.content-card');
        
        filterButtons.forEach(button => {
            button.addEventListener('click', () => {
                // Remove active class from all buttons
                filterButtons.forEach(btn => btn.classList.remove('active'));
                
                // Add active class to clicked button
                button.classList.add('active');
                
                // Get filter value
                const filterValue = button.getAttribute('data-filter');
                
                // Filter content cards
                contentCards.forEach(card => {
                    if (filterValue === 'all') {
                        card.style.display = 'block';
                    } else {
                        const tags = card.getAttribute('data-tags');
                        if (tags.includes(filterValue)) {
                            card.style.display = 'block';
                        } else {
                            card.style.display = 'none';
                        }
                    }
                });
            });
        });
    });
</script>
{% endblock %}